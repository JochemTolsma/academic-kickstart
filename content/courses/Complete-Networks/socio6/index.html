---
title: RSiena I (causes)
author: JochemTolsma
date: '2020-09-22'
slug: socio6
categories:
  - R
  - Social Networks
tags: []
linktitle: Socionets-Causes-Methods
summary: "RSiena, twitter, social networks, plotting, tutorial, R, Lavaan"
lastmod: '2020-09-15T08:27:34+02:00'
type: book
weight: 45
 
output:
  blogdown::html_page:
    highlight: "haddock"
    number_sections: yes
    self_contained: no
    toc: true
    fig_width: 6
    dev: "svg"
editor_options: 
  chunk_output_type: inline
---

<script src="/rmarkdown-libs/accessible-code-block/empty-anchor.js"></script>
<script src="/rmarkdown-libs/clipboard/clipboard.min.js"></script>
<link href="/rmarkdown-libs/primer-tooltips/build.css" rel="stylesheet" />
<link href="/rmarkdown-libs/klippy/css/klippy.min.css" rel="stylesheet" />
<script src="/rmarkdown-libs/klippy/js/klippy.min.js"></script>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>

<div id="TOC">
<ul>
<li><a href="#introduction---rsiena"><span class="toc-section-number">1</span> Introduction - RSiena</a></li>
<li><a href="#assumptions"><span class="toc-section-number">2</span> Assumptions</a></li>
<li><a href="#rate-function"><span class="toc-section-number">3</span> Rate function</a></li>
<li><a href="#interpretation-of-parameters"><span class="toc-section-number">4</span> Interpretation of parameters</a></li>
<li><a href="#lab-exercise"><span class="toc-section-number">5</span> lab exercise</a><ul>
<li><a href="#before-you-start"><span class="toc-section-number">5.1</span> Before you start</a></li>
<li><a href="#data"><span class="toc-section-number">5.2</span> Data</a></li>
<li><a href="#research-questions"><span class="toc-section-number">5.3</span> Research questions</a></li>
<li><a href="#descriptive-statistics"><span class="toc-section-number">5.4</span> Descriptive statistics</a><ul>
<li><a href="#densities"><span class="toc-section-number">5.4.1</span> densities</a></li>
</ul></li>
<li><a href="#coleman-homophily-index."><span class="toc-section-number">5.5</span> Coleman Homophily index.</a></li>
<li><a href="#rsiena-models"><span class="toc-section-number">5.6</span> RSiena models</a><ul>
<li><a href="#step-1-data"><span class="toc-section-number">5.6.1</span> step 1: Data</a></li>
<li><a href="#step-2-define-myeff-object."><span class="toc-section-number">5.6.2</span> step 2: define myeff object.</a></li>
<li><a href="#step-3-create-alogrithm"><span class="toc-section-number">5.6.3</span> step 3: create alogrithm</a></li>
<li><a href="#step-4-estimate-model"><span class="toc-section-number">5.6.4</span> step 4: estimate model</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<!--set global settings-->
<!--copy to clipboard-->
<p><script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script><script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<!---
https://www.w3schools.com/w3css/w3css_buttons.asp
https://www.freecodecamp.org/news/a-quick-guide-to-styling-buttons-using-css-f64d4f96337f/
---></p>
<button onclick="window.location.href=&#39;static/index.Rmd&#39;;">
download code
</button>
<div id="introduction---rsiena" class="section level1">
<h1><span class="header-section-number">1</span> Introduction - RSiena</h1>
<p>This page introduces the R package RSiena. This week/page we will estimate our first RSiena models to explain the structure of the network and how the network structure evolves. With respect to the latter we only focus this week on ‘tie evolution’ and ‘selection processes’. Thus, we are focusing on the causes. Next week (this page) we will focus on node evolution and influence processes.<br />
Please visit the RSiena homepage <a href="https://www.stats.ox.ac.uk/~snijders/siena/">here</a>. On the website you may find the exceptionally well written manual. But the RSiena website also contains all kind of useful RSiena scripts and ‘lab exercises’.<br />
Before we start with our own lab exercise, I would like you to:</p>
<ol style="list-style-type: decimal">
<li>walk through script number 4, and 5.<br />
</li>
<li>walk through script number 1 and make the first assignment.<br />
</li>
<li>make the first lab exercise on the RSiena website ‘sex segregation of friendship networks’.</li>
</ol>
<p>My own lab exercise can be found at the bottom of this page. [go to lab exercise]</p>
<p>Having taught the course social networks for a couple of years now to the students of the Research Master Social and Cultural Sciences, I think there are a couple of aspects that deserve a little bit more attention than they get in the manual and on the website. Namely,…</p>
<ol style="list-style-type: decimal">
<li>model assumptions that refer to the ‘Theory of Action’<br />
</li>
<li>the interpretation of the (estimated) rate parameter<br />
</li>
<li>the interpretation of the (estimated) coefficients within the evaluation function<br />
</li>
<li>the difference between a $ s^{net} $ effect and an $ s^{el} $ effect.<br />
</li>
<li>how to build subsequent models in RSiena</li>
</ol>
</div>
<div id="assumptions" class="section level1">
<h1><span class="header-section-number">2</span> Assumptions</h1>
<ul>
<li>ministep:
<ol style="list-style-type: lower-alpha">
<li>one actor per time step (no coordination)<br />
</li>
<li>one tie change per time step<br />
</li>
<li>gradual behavioral change (one unit increase per time step)<br />
</li>
</ol></li>
<li>no memory: the same choice set is evaluated the same each time.<br />
</li>
<li>no strategic action: actors do not anticipate that one (negatively evaluated) tie change at T1 may open up the opportunity for a (very positively) tie change at T2.<br />
</li>
<li>local networks: actors base their decisions only on the evaluation of their own local network (no altruism).</li>
</ul>
</div>
<div id="rate-function" class="section level1">
<h1><span class="header-section-number">3</span> Rate function</h1>
<p>We find the rate function in the manual on page 43:</p>
<p><span class="math display">\[ \lambda_+(x^0)=\Sigma_i \lambda_i (x^0)\]</span>
But what does this mean?</p>
<ul>
<li><span class="math inline">\(x^0\)</span> is simply the current network.<br />
</li>
<li><span class="math inline">\(\lambda_i\)</span> is the waiting time of actor <em>i</em>.</li>
</ul>
<p>But how do we determine the waiting time of actor <em>i</em>? Well these waiting times are exponentially distributed with a rate parameter, which, if the network is very large, is <span class="math inline">\(\lambda_+\)</span> , the sum of all individual waiting times: <span class="math inline">\(\Sigma_i \lambda_i (x^0)\)</span>. See below for two examples:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a>dist_<span class="dv">5</span> &lt;-<span class="st"> </span><span class="kw">rexp</span>(<span class="dv">10000</span>, <span class="dt">rate =</span> <span class="dv">5</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">hist</span>(dist_<span class="dv">5</span>, <span class="dt">main =</span> <span class="st">&quot;rate parameter = 5&quot;</span>, <span class="dt">freq =</span> <span class="ot">FALSE</span>, <span class="dt">xlab =</span> <span class="st">&quot;lambda_i&quot;</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, </span>
<span id="cb1-5"><a href="#cb1-5"></a>    <span class="dv">9</span>))</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a>dist_<span class="dv">10</span> &lt;-<span class="st"> </span><span class="kw">rexp</span>(<span class="dv">10000</span>, <span class="dt">rate =</span> <span class="dv">10</span>)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="kw">hist</span>(dist_<span class="dv">10</span>, <span class="dt">main =</span> <span class="st">&quot;rate parameter = 10&quot;</span>, <span class="dt">freq =</span> <span class="ot">FALSE</span>, <span class="dt">xlab =</span> <span class="st">&quot;lambda_i&quot;</span>, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, </span>
<span id="cb1-9"><a href="#cb1-9"></a>    <span class="dv">9</span>))</span></code></pre></div>
<p><img src="/courses/Complete-Networks/socio6/index_files/figure-html/unnamed-chunk-1-1.svg" width="576" /></p>
<p>The expected waiting time is simply the mean of all individual waiting times <span class="math inline">\(\lambda_i\)</span>. We saved all waiting times in <code>dist_5</code> and in <code>dist_10</code>.</p>
<p>Thus:</p>
<ul>
<li><code>mean(dist_5)</code>= 0.1991519 <span class="math inline">\(\approx\)</span> <span class="math inline">\(\frac{1}{\lambda_+}\)</span> = 1/5 = 0.2<br />
</li>
<li><code>mean(dist_10)</code>= 0.0985059 <span class="math inline">\(\approx\)</span> <span class="math inline">\(\frac{1}{\lambda_+}\)</span> = 1/10 = 0.1</li>
</ul>
<p>Thus each actor gets a waiting time <span class="math inline">\(\lambda_i\)</span> sampled from the exponential distribution with the specified rate parameter. Based on these waiting times, the probability is determined that actor <em>i</em> will be next:</p>
<p><span class="math display">\[ \frac{\lambda_i(x^0)}{\lambda_+(x^0)} \]</span>
{{% alert warning %}}
To be honest, I think waiting time is a wrong label. Because nodes with the longest waiting time have the highest probability to be chosen!<br />
{{% /alert %}}</p>
<p>Let us make this more concrete. Suppose we have a network of 4 nodes and the rate parameter is 5.</p>
<p>The individual waiting times are:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">set.seed</span>(<span class="dv">34647</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>waitingtimes &lt;-<span class="st"> </span><span class="kw">rexp</span>(<span class="dv">4</span>, <span class="dt">rate =</span> <span class="dv">5</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;waitingtime&quot;</span>, <span class="kw">as.factor</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>), <span class="st">&quot;:&quot;</span>, <span class="kw">round</span>(waitingtimes, <span class="dv">2</span>), <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;waitingtime1:0.45&quot; &quot;waitingtime2:0.13&quot; &quot;waitingtime3:0.52&quot; &quot;waitingtime4:0.21&quot;</code></pre>
<p>Thus <span class="math inline">\(\lambda_+(x^0)\)</span> = <code>sum(waitingtimes)</code> = 1.3174602</p>
<p>Which makes for the following probabilities:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">round</span>(waitingtimes<span class="op">/</span><span class="kw">sum</span>(waitingtimes), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.34 0.10 0.39 0.16</code></pre>
<p>And whose turn will it be?</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>actor &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">1</span>, <span class="dt">prob =</span> waitingtimes)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;chosen actor:&quot;</span>, actor, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;chosen actor: 3&quot;</code></pre>
<p>Now let us repeat this process a couple of times:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">set.seed</span>(<span class="dv">245651</span>)</span>
<span id="cb8-2"><a href="#cb8-2"></a>time &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="cf">for</span> (steps <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="co"># sample the waiting times from the exponential distribution</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>    waitingtimes &lt;-<span class="st"> </span><span class="kw">rexp</span>(<span class="dv">4</span>, <span class="dt">rate =</span> <span class="dv">5</span>)</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="co"># calculate the probabilities</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>    probabilities &lt;-<span class="st"> </span>waitingtimes<span class="op">/</span><span class="kw">sum</span>(waitingtimes)</span>
<span id="cb8-8"><a href="#cb8-8"></a>    <span class="co"># pick the actor which has an opportunity for change</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>    actor &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">1</span>, <span class="dt">prob =</span> waitingtimes)</span>
<span id="cb8-10"><a href="#cb8-10"></a>    <span class="co"># show results</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;chosen actor:&quot;</span>, actor, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb8-12"><a href="#cb8-12"></a>    time &lt;-<span class="st"> </span>time <span class="op">+</span><span class="st"> </span>waitingtimes[actor]</span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;total time:&quot;</span>, time, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb8-14"><a href="#cb8-14"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;chosen actor: 4&quot;
## [1] &quot;total time: 0.188847544408383&quot;
## [1] &quot;chosen actor: 2&quot;
## [1] &quot;total time: 0.633620880510578&quot;
## [1] &quot;chosen actor: 3&quot;
## [1] &quot;total time: 0.98291679876472&quot;
## [1] &quot;chosen actor: 3&quot;
## [1] &quot;total time: 1.22129838765698&quot;
## [1] &quot;chosen actor: 3&quot;
## [1] &quot;total time: 1.40387658942681&quot;</code></pre>
<p>So how many opportunities for change do we have before the total time exceeds 1? Well 4.
If we repeat the process but with a rate parameter of 10. What would we find?</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">set.seed</span>(<span class="dv">245651</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a>time &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="cf">for</span> (steps <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</span>
<span id="cb10-4"><a href="#cb10-4"></a>    waitingtimes &lt;-<span class="st"> </span><span class="kw">rexp</span>(<span class="dv">4</span>, <span class="dt">rate =</span> <span class="dv">10</span>)</span>
<span id="cb10-5"><a href="#cb10-5"></a>    probabilities &lt;-<span class="st"> </span>waitingtimes<span class="op">/</span><span class="kw">sum</span>(waitingtimes)</span>
<span id="cb10-6"><a href="#cb10-6"></a>    actor &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">1</span>, <span class="dt">prob =</span> waitingtimes)</span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;chosen actor:&quot;</span>, actor, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb10-8"><a href="#cb10-8"></a>    time &lt;-<span class="st"> </span>time <span class="op">+</span><span class="st"> </span>waitingtimes[actor]</span>
<span id="cb10-9"><a href="#cb10-9"></a>    <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&quot;total time:&quot;</span>, time, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>))</span>
<span id="cb10-10"><a href="#cb10-10"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;chosen actor: 4&quot;
## [1] &quot;total time: 0.0944237722041917&quot;
## [1] &quot;chosen actor: 2&quot;
## [1] &quot;total time: 0.316810440255289&quot;
## [1] &quot;chosen actor: 3&quot;
## [1] &quot;total time: 0.49145839938236&quot;
## [1] &quot;chosen actor: 3&quot;
## [1] &quot;total time: 0.610649193828492&quot;
## [1] &quot;chosen actor: 3&quot;
## [1] &quot;total time: 0.701938294713407&quot;
## [1] &quot;chosen actor: 4&quot;
## [1] &quot;total time: 0.738830435835778&quot;
## [1] &quot;chosen actor: 1&quot;
## [1] &quot;total time: 0.898197567791467&quot;
## [1] &quot;chosen actor: 4&quot;
## [1] &quot;total time: 1.10614433369982&quot;
## [1] &quot;chosen actor: 2&quot;
## [1] &quot;total time: 1.16367037041433&quot;
## [1] &quot;chosen actor: 4&quot;
## [1] &quot;total time: 1.18615504420682&quot;</code></pre>
<p>We would find there are 8 opportunities for change. Thus <strong>the larger the rate parameter the more opportunities for change per actor there are within a given time period</strong>. And in RSiena the optimal value for the rate parameter is estimated.<br />
The time period in RSiena is set to be the size of the network. This leads to a nice interpretation of the estimated rate parameter. From the above we know that the mean waiting time for any actor will be <span class="math inline">\(\frac{1}{\lambda_+}\)</span> and thus that <strong>the estimated number of opportunities for change per actor in a time period will be the estimated value of the rate_parameter</strong>.</p>
</div>
<div id="interpretation-of-parameters" class="section level1">
<h1><span class="header-section-number">4</span> Interpretation of parameters</h1>
<p>The evaluation function is defined as:</p>
<p><span class="math display">\[ f^{net}_i(x) = \Sigma_k \beta^{net}_ks_{ik}^{net}(x) \]</span>
Thus <span class="math inline">\(f^{net}\)</span> is the evaluation function. And it attaches a value/number to the <em>attractiveness</em> of the network, <span class="math inline">\(x\)</span>. The subscript <em>i</em> refers to the agent, thus each agent will get its own value of the evaluation function. <span class="math inline">\(\beta^{net}_k\)</span> refers to our estimated parameters. These are what the results will spit out. And for each network effect <em>k</em>, <span class="math inline">\(s^{net}_{ik}\)</span>, we will obtain a separate estimate. Each agent evaluates the attractiveness of its local network environment. This is why <span class="math inline">\(s_i\)</span> has a subscript <em>i</em>. We as scientists have ideas about which network effects <span class="math inline">\(s^{net}_{ik}\)</span> may play a role in the evaluation of the local networks. Based on the mathematical definition of <span class="math inline">\(s^{net}_{ik}\)</span> the value of statistic <em>k</em> will be determined for each of the possible networks that may result after a ministep of agent <em>i</em>. Agent <em>i</em> is most likely to take a ministep that will result in the network with the highest attractiveness value. The RSiena software will then estimate the parameters <span class="math inline">\(\beta^{net}_k\)</span> for which it is most likely to obtain the network observed at T2 given the network observed at T1. More precisely, to observe a network at T2 with similar network structures as the actual network observed at T2.</p>
<p>Now, let us suppose that actor <em>i</em> has an opportunity for change at that after a ministep three possible networks could occur. Or stated otherwise, the choice set consists of three networks for actor <em>i</em>. See below.</p>
<p><img src="eva1.PNG" /></p>
<p><strong>Figure:</strong> Choice set for actor <em>i</em>.</p>
<p>How actor <em>i</em> evaluates these networks depends on the <span class="math inline">\(s^{net}_{ik}\)</span> in the evaluation function. Let us suppose only the outdegree effect is part of the evaluation function. Thus:</p>
<p><span class="math display">\[ f^{net}_i(x) = \beta^{net}_1s_{i1}^{net}(x) \]</span>
where</p>
<p><span class="math display">\[ s_{i1}^{net}(x) = \Sigma_jx_{ij}\]</span>
and given the networks above:</p>
<p><span class="math display">\[ s_{i1}^{net}(x_a) = 0 , s_{i1}^{net}(x_b) = 1, s_{i1}^{net}(x_c) = 1\]</span>
and hence:</p>
<p><span class="math display">\[ f^{net}_i(x_a) = 0, f^{net}_i(x_b) = \beta^{net}_1, f^{net}_i(x_c) = \beta^{net}_1 \]</span>
The probability that <span class="math inline">\(x_b\)</span> will be chosen is given by:</p>
<p><span class="math display">\[ P(X= x_b) = \frac{exp(f^{net}_i(x_b))}{exp(f^{net}_i(x_a))+exp(f^{net}_i(x_b))+exp(f^{net}_i(x_c))} \]</span></p>
<p>For the interpretation is much easier to interpret the ratio of two probabilities:</p>
<p><span class="math display">\[ \frac{P(X= x_b)}{P(X= x_a)} = \frac{exp(f^{net}_i(x_b))}{exp(f^{net}_i(x_a))} = exp(f^{net}_i(x_b) - f^{net}_i(x_a) ) = exp(\beta^{net}_1)\]</span>
Let us assume that <span class="math inline">\(\beta^{net}_1 = -2\)</span>
This would imply that:</p>
<p><span class="math display">\[ P(X= x_b) = exp(-2)* P(X= x_a) \approx 0.14*P(X= x_a) \]</span></p>
<p>Thus the probability to observe a tie between <em>i</em> and <em>j</em> (network <span class="math inline">\(x_b\)</span>) is 14% the probability to observe no tie between <em>i</em> and <em>j</em> (network <span class="math inline">\(x_a\)</span>).</p>
<p>{{% alert note %}}
Is it possible to deduce the density of the network from this formula? Well let suppose actor <em>i</em> would only have options <span class="math inline">\(x_a\)</span> and <span class="math inline">\(x_b\)</span> then the probabilities would need to sum to 1. And this would imply a density of approximately .12 (0.12=0.14*.88 and .12 + .88 = 1).<br />
{{% /alert %}}</p>
</div>
<div id="lab-exercise" class="section level1">
<h1><span class="header-section-number">5</span> lab exercise</h1>
<p>We are going to use the same dataset we used in the lab exercise on plotting social networks.</p>
<p>During the workgroup I will explain all code. For those of you who don’t attend the workgroups, google knows way more than I do.</p>
<p>{{% alert warning %}}
In the upper left and right corner of the code blocks you will find copy-to-clipboard buttons. Use these buttons to copy the code to your own editor.
{{% /alert %}}</p>
<div id="before-you-start" class="section level2">
<h2><span class="header-section-number">5.1</span> Before you start</h2>
<p>Before you start, check whether you run the latest RStudio version (from the Help menu, pick ‘check for updates’ and whether you need to update R.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;installr&quot;</span>)  <span class="co">#you  first install packages</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw">require</span>(installr)  <span class="co">#then you will need to activate packages. </span></span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="kw">updateR</span>()  <span class="co">#run the function to start the update process</span></span></code></pre></div>
<p>Give your script a nice name. Include the author, and data when you last modified the script. Include a lot of comments in your script! Don’t forget, always start with cleaning up your workspace.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co">### Author: JOCHEM TOLSMA### Lastmod: 31-08-2020###</span></span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="co"># cleanup workspace</span></span>
<span id="cb13-4"><a href="#cb13-4"></a><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())</span></code></pre></div>
<p>And set your working directory.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># set working directory</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">setwd</span>(<span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">YOURDIR</span><span class="ch">\\</span><span class="st">YOURSUBDIR</span><span class="ch">\\</span><span class="st">YOURSUBSUBDIR</span><span class="ch">\\</span><span class="st">&quot;</span>)  <span class="co">#change to your own workdirectory</span></span></code></pre></div>
<p>Install the packages you will need.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># install packages</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">library</span>(RSiena)</span></code></pre></div>
<p>Define your custom build functions.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># density: observed relations divided by possible relations</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>fdensity &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="co"># x is your nomination network make sure diagonal cells are NA</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>    <span class="co"># take care of RSiena structural zeros, set as missing.</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>    x[x <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>    <span class="kw">sum</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T)<span class="op">/</span>(<span class="kw">sum</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">na.rm =</span> T))</span>
<span id="cb16-8"><a href="#cb16-8"></a>}</span>
<span id="cb16-9"><a href="#cb16-9"></a></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="co"># calculate intragroup density</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>fdensityintra &lt;-<span class="st"> </span><span class="cf">function</span>(x, A) {</span>
<span id="cb16-12"><a href="#cb16-12"></a>    <span class="co"># A is matrix indicating whether nodes in dyad have same node attributes</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>    <span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>    x[x <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>    <span class="kw">diag</span>(A) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-16"><a href="#cb16-16"></a>    <span class="kw">sum</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>A <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T)<span class="op">/</span>(<span class="kw">sum</span>((x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">&amp;</span><span class="st"> </span>A <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T))</span>
<span id="cb16-17"><a href="#cb16-17"></a>}</span>
<span id="cb16-18"><a href="#cb16-18"></a></span>
<span id="cb16-19"><a href="#cb16-19"></a><span class="co"># calculate intragroup density</span></span>
<span id="cb16-20"><a href="#cb16-20"></a>fdensityinter &lt;-<span class="st"> </span><span class="cf">function</span>(x, A) {</span>
<span id="cb16-21"><a href="#cb16-21"></a>    <span class="co"># A is matrix indicating whether nodes in dyad have same node attributes</span></span>
<span id="cb16-22"><a href="#cb16-22"></a>    <span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-23"><a href="#cb16-23"></a>    x[x <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-24"><a href="#cb16-24"></a>    <span class="kw">diag</span>(A) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-25"><a href="#cb16-25"></a>    <span class="kw">sum</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>A <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T)<span class="op">/</span>(<span class="kw">sum</span>((x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">&amp;</span><span class="st"> </span>A <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T))</span>
<span id="cb16-26"><a href="#cb16-26"></a>}</span>
<span id="cb16-27"><a href="#cb16-27"></a></span>
<span id="cb16-28"><a href="#cb16-28"></a><span class="co"># construct dyadcharacteristic whether nodes are similar/homogenous</span></span>
<span id="cb16-29"><a href="#cb16-29"></a>fhomomat &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb16-30"><a href="#cb16-30"></a>    <span class="co"># x is a vector of node-covariate</span></span>
<span id="cb16-31"><a href="#cb16-31"></a>    xmat &lt;-<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="kw">length</span>(x), <span class="dt">ncol =</span> <span class="kw">length</span>(x))</span>
<span id="cb16-32"><a href="#cb16-32"></a>    xmatt &lt;-<span class="st"> </span><span class="kw">t</span>(xmat)</span>
<span id="cb16-33"><a href="#cb16-33"></a>    xhomo &lt;-<span class="st"> </span>xmat <span class="op">==</span><span class="st"> </span>xmatt</span>
<span id="cb16-34"><a href="#cb16-34"></a>    <span class="kw">return</span>(xhomo)</span>
<span id="cb16-35"><a href="#cb16-35"></a>}</span>
<span id="cb16-36"><a href="#cb16-36"></a></span>
<span id="cb16-37"><a href="#cb16-37"></a><span class="co"># a function to calculate all valid dyads.</span></span>
<span id="cb16-38"><a href="#cb16-38"></a>fndyads &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb16-39"><a href="#cb16-39"></a>    <span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-40"><a href="#cb16-40"></a>    x[x <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-41"><a href="#cb16-41"></a>    (<span class="kw">sum</span>((x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>), <span class="dt">na.rm =</span> T))</span>
<span id="cb16-42"><a href="#cb16-42"></a>}</span>
<span id="cb16-43"><a href="#cb16-43"></a></span>
<span id="cb16-44"><a href="#cb16-44"></a><span class="co"># a function to calculate all valid intragroupdyads.</span></span>
<span id="cb16-45"><a href="#cb16-45"></a>fndyads2 &lt;-<span class="st"> </span><span class="cf">function</span>(x, A) {</span>
<span id="cb16-46"><a href="#cb16-46"></a>    <span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-47"><a href="#cb16-47"></a>    x[x <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-48"><a href="#cb16-48"></a>    <span class="kw">diag</span>(A) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-49"><a href="#cb16-49"></a>    (<span class="kw">sum</span>((x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="op">&amp;</span><span class="st"> </span>A <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T))</span>
<span id="cb16-50"><a href="#cb16-50"></a>}</span>
<span id="cb16-51"><a href="#cb16-51"></a></span>
<span id="cb16-52"><a href="#cb16-52"></a></span>
<span id="cb16-53"><a href="#cb16-53"></a>fscolnet &lt;-<span class="st"> </span><span class="cf">function</span>(network, ccovar) {</span>
<span id="cb16-54"><a href="#cb16-54"></a>    <span class="co"># Calculate coleman on network level:</span></span>
<span id="cb16-55"><a href="#cb16-55"></a>    <span class="co"># https://reader.elsevier.com/reader/sd/pii/S0378873314000239?token=A42F99FF6E2B750436DD2CB0DB7B1F41BDEC16052A45683C02644DAF88215A3379636B2AA197B65941D6373E9E2EE413</span></span>
<span id="cb16-56"><a href="#cb16-56"></a>    </span>
<span id="cb16-57"><a href="#cb16-57"></a>    fhomomat &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb16-58"><a href="#cb16-58"></a>        xmat &lt;-<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="kw">length</span>(x), <span class="dt">ncol =</span> <span class="kw">length</span>(x))</span>
<span id="cb16-59"><a href="#cb16-59"></a>        xmatt &lt;-<span class="st"> </span><span class="kw">t</span>(xmat)</span>
<span id="cb16-60"><a href="#cb16-60"></a>        xhomo &lt;-<span class="st"> </span>xmat <span class="op">==</span><span class="st"> </span>xmatt</span>
<span id="cb16-61"><a href="#cb16-61"></a>        <span class="kw">return</span>(xhomo)</span>
<span id="cb16-62"><a href="#cb16-62"></a>    }</span>
<span id="cb16-63"><a href="#cb16-63"></a>    </span>
<span id="cb16-64"><a href="#cb16-64"></a>    fsumintra &lt;-<span class="st"> </span><span class="cf">function</span>(x, A) {</span>
<span id="cb16-65"><a href="#cb16-65"></a>        <span class="co"># A is matrix indicating whether nodes constituting dyad have same characteristics</span></span>
<span id="cb16-66"><a href="#cb16-66"></a>        <span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-67"><a href="#cb16-67"></a>        x[x <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-68"><a href="#cb16-68"></a>        <span class="kw">diag</span>(A) &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-69"><a href="#cb16-69"></a>        <span class="kw">sum</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>A <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">na.rm =</span> T)</span>
<span id="cb16-70"><a href="#cb16-70"></a>    }</span>
<span id="cb16-71"><a href="#cb16-71"></a>    </span>
<span id="cb16-72"><a href="#cb16-72"></a>    <span class="co"># expecation w*=sum_g sum_i (ni((ng-1)/(N-1)))</span></span>
<span id="cb16-73"><a href="#cb16-73"></a>    network[network <span class="op">==</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-74"><a href="#cb16-74"></a>    ni &lt;-<span class="st"> </span><span class="kw">rowSums</span>(network, <span class="dt">na.rm =</span> T)</span>
<span id="cb16-75"><a href="#cb16-75"></a>    ng &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb16-76"><a href="#cb16-76"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(ccovar)) {</span>
<span id="cb16-77"><a href="#cb16-77"></a>        ng[i] &lt;-<span class="st"> </span><span class="kw">table</span>(ccovar)[<span class="kw">rownames</span>(<span class="kw">table</span>(ccovar)) <span class="op">==</span><span class="st"> </span>ccovar[i]]</span>
<span id="cb16-78"><a href="#cb16-78"></a>    }</span>
<span id="cb16-79"><a href="#cb16-79"></a>    N &lt;-<span class="st"> </span><span class="kw">length</span>(ccovar)</span>
<span id="cb16-80"><a href="#cb16-80"></a>    wexp &lt;-<span class="st"> </span><span class="kw">sum</span>(ni <span class="op">*</span><span class="st"> </span>((ng <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)<span class="op">/</span>(N <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)), <span class="dt">na.rm =</span> T)</span>
<span id="cb16-81"><a href="#cb16-81"></a>    </span>
<span id="cb16-82"><a href="#cb16-82"></a>    <span class="co"># wgg1 how many intragroup ties</span></span>
<span id="cb16-83"><a href="#cb16-83"></a>    w &lt;-<span class="st"> </span><span class="kw">fsumintra</span>(network, <span class="kw">fhomomat</span>(ccovar))</span>
<span id="cb16-84"><a href="#cb16-84"></a>    </span>
<span id="cb16-85"><a href="#cb16-85"></a>    Scol_net &lt;-<span class="st"> </span><span class="kw">ifelse</span>(w <span class="op">&gt;=</span><span class="st"> </span>wexp, (w <span class="op">-</span><span class="st"> </span>wexp)<span class="op">/</span>(<span class="kw">sum</span>(ni, <span class="dt">na.rm =</span> T) <span class="op">-</span><span class="st"> </span>wexp), (w <span class="op">-</span><span class="st"> </span>wexp)<span class="op">/</span>wexp)</span>
<span id="cb16-86"><a href="#cb16-86"></a>    <span class="kw">return</span>(Scol_net)</span>
<span id="cb16-87"><a href="#cb16-87"></a>    </span>
<span id="cb16-88"><a href="#cb16-88"></a>}</span></code></pre></div>
</div>
<div id="data" class="section level2">
<h2><span class="header-section-number">5.2</span> Data</h2>
<p>We are going to play with Twitter Networks among Dutch MPs.</p>
<p><strong>Download data <a href="static/twitter_20190919.Rdata">here</a>.</strong></p>
<p>Load the Robject and have a look at it. Save the list elements in separate objects.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">getwd</span>()</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw">load</span>(<span class="st">&quot;static/twitter_20190919.RData&quot;</span>)  <span class="co">#change to your working directory</span></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="kw">str</span>(twitter_<span class="dv">20190919</span>, <span class="dv">1</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a>keyf &lt;-<span class="st"> </span>twitter_<span class="dv">20190919</span>[[<span class="dv">1</span>]]</span>
<span id="cb17-5"><a href="#cb17-5"></a>mydata &lt;-<span class="st"> </span>twitter_<span class="dv">20190919</span>[[<span class="dv">2</span>]]</span>
<span id="cb17-6"><a href="#cb17-6"></a>seats &lt;-<span class="st"> </span>twitter_<span class="dv">20190919</span>[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## [1] &quot;C:/Users/Administrator/Documents/GitHub/homepage/content/courses/Complete-Networks/socio6&quot;
## List of 3
##  $ keyf  :&#39;data.frame&#39;:  147 obs. of  41 variables:
##  $ mydata:List of 8
##   ..- attr(*, &quot;higher&quot;)= Named logi [1:9] FALSE FALSE FALSE FALSE FALSE FALSE ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:9] &quot;fnet,fnet&quot; &quot;atmnet,fnet&quot; &quot;rtnet,fnet&quot; &quot;fnet,atmnet&quot; ...
##   ..- attr(*, &quot;disjoint&quot;)= Named logi [1:9] FALSE FALSE FALSE FALSE FALSE FALSE ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:9] &quot;fnet,fnet&quot; &quot;atmnet,fnet&quot; &quot;rtnet,fnet&quot; &quot;fnet,atmnet&quot; ...
##   ..- attr(*, &quot;atLeastOne&quot;)= Named logi [1:9] FALSE FALSE FALSE FALSE FALSE FALSE ...
##   .. ..- attr(*, &quot;names&quot;)= chr [1:9] &quot;fnet,fnet&quot; &quot;atmnet,fnet&quot; &quot;rtnet,fnet&quot; &quot;fnet,atmnet&quot; ...
##   ..- attr(*, &quot;class&quot;)= chr &quot;siena&quot;
##  $ seats :&#39;data.frame&#39;:  150 obs. of  5 variables:</code></pre>
<p>So, what do we have?</p>
<ul>
<li>keyf: a data.frame on 147 Dutch MPs.</li>
<li>mydata: This an object which is ready to analyze in RSiena. It is actually a quite complicated object. For now three things are important:
<ol style="list-style-type: decimal">
<li>The nodes in mydata are the same as in keyf and in seats.<br />
</li>
<li>It contains the twitter data at three timepoints (in <code>mydata$depvars</code>). We have three layers:</li>
</ol>
<ul>
<li>fnet: who follows whom</li>
<li>atmnet: who atmentions whom</li>
<li>rtnet: who retweats whom<br />
</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>It also contains timeinvariant information on the nodes (in <code>mydata$cCovars</code>)</li>
</ol></li>
<li>seats: a dataset which contains the coordinates of the seats in the House of Parliament in the Netherlands.</li>
</ul>
<p>{{% alert note %}}</p>
<p>We are going to focus on the retweet relations of politicians. This is most closely related to a positive or helping relation. Thus who is retweeting (‘helping’) whom on Twitter?</p>
<p>{{% / alert %}}</p>
</div>
<div id="research-questions" class="section level2">
<h2><span class="header-section-number">5.3</span> Research questions</h2>
<ol style="list-style-type: decimal">
<li>To what extent do we observer segregation along party affiliation in the retweet network among Dutch MPs.<br />
</li>
<li>To what extent is the presumed segregation along party affiliation in the retweet network among Dutch MPs the byproduct of segregation along other social dimensions such as sex, age?<br />
</li>
<li>To what extent is the presumed segregation along party affiliation in the retweet network among Dutch MPs the result of propinquity?<br />
</li>
<li>To what extent is the presumed segregation along party affiliation in the retweet network among Dutch MPs the result of network effects?</li>
</ol>
</div>
<div id="descriptive-statistics" class="section level2">
<h2><span class="header-section-number">5.4</span> Descriptive statistics</h2>
<div id="densities" class="section level3">
<h3><span class="header-section-number">5.4.1</span> densities</h3>
<p>Let us first describe the total density and intra- and intergroup densities. Don’t be scared of the long script. I just do it for all kind of dimensions and for all three layers in the twitter network.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># retrieve nominationdata from rsiena object</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>fnet &lt;-<span class="st"> </span>mydata<span class="op">$</span>depvars<span class="op">$</span>fnet</span>
<span id="cb19-3"><a href="#cb19-3"></a>atmnet &lt;-<span class="st"> </span>mydata<span class="op">$</span>depvars<span class="op">$</span>atmnet</span>
<span id="cb19-4"><a href="#cb19-4"></a>rtnet &lt;-<span class="st"> </span>mydata<span class="op">$</span>depvars<span class="op">$</span>rtnet</span>
<span id="cb19-5"><a href="#cb19-5"></a></span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="co"># retrieve node-attributes from rsiena object</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>vrouw &lt;-<span class="st"> </span>mydata<span class="op">$</span>cCovars<span class="op">$</span>vrouw</span>
<span id="cb19-8"><a href="#cb19-8"></a>partij &lt;-<span class="st"> </span>mydata<span class="op">$</span>cCovars<span class="op">$</span>partij</span>
<span id="cb19-9"><a href="#cb19-9"></a>ethminz &lt;-<span class="st"> </span>mydata<span class="op">$</span>cCovars<span class="op">$</span>ethminz</span>
<span id="cb19-10"><a href="#cb19-10"></a>lft &lt;-<span class="st"> </span>mydata<span class="op">$</span>cCovars<span class="op">$</span>lft</span>
<span id="cb19-11"><a href="#cb19-11"></a></span>
<span id="cb19-12"><a href="#cb19-12"></a><span class="co"># de-mean-center node attributes</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>ethminz &lt;-<span class="st"> </span>ethminz <span class="op">+</span><span class="st"> </span><span class="kw">attributes</span>(ethminz)<span class="op">$</span>mean</span>
<span id="cb19-14"><a href="#cb19-14"></a>partij &lt;-<span class="st"> </span>partij <span class="op">+</span><span class="st"> </span><span class="kw">attributes</span>(partij)<span class="op">$</span>mean</span>
<span id="cb19-15"><a href="#cb19-15"></a>vrouw &lt;-<span class="st"> </span>vrouw <span class="op">+</span><span class="st"> </span><span class="kw">attributes</span>(vrouw)<span class="op">$</span>mean</span>
<span id="cb19-16"><a href="#cb19-16"></a>lft &lt;-<span class="st"> </span>lft <span class="op">+</span><span class="st"> </span><span class="kw">attributes</span>(lft)<span class="op">$</span>mean</span>
<span id="cb19-17"><a href="#cb19-17"></a></span>
<span id="cb19-18"><a href="#cb19-18"></a><span class="co"># construct matrices for similarity for each dimension (dyad characteristics)</span></span>
<span id="cb19-19"><a href="#cb19-19"></a>vrouwm &lt;-<span class="st"> </span><span class="kw">fhomomat</span>(vrouw)</span>
<span id="cb19-20"><a href="#cb19-20"></a>partijm &lt;-<span class="st"> </span><span class="kw">fhomomat</span>(partij)</span>
<span id="cb19-21"><a href="#cb19-21"></a>ethminzm &lt;-<span class="st"> </span><span class="kw">fhomomat</span>(ethminz)</span>
<span id="cb19-22"><a href="#cb19-22"></a></span>
<span id="cb19-23"><a href="#cb19-23"></a><span class="co"># just for fun, make dyad characteristic indicating whether both nodes are ethnic minorities</span></span>
<span id="cb19-24"><a href="#cb19-24"></a>xmat &lt;-<span class="st"> </span><span class="kw">matrix</span>(ethminz, <span class="dt">nrow =</span> <span class="kw">length</span>(ethminz), <span class="dt">ncol =</span> <span class="kw">length</span>(ethminz))</span>
<span id="cb19-25"><a href="#cb19-25"></a>xmatt &lt;-<span class="st"> </span><span class="kw">t</span>(xmat)</span>
<span id="cb19-26"><a href="#cb19-26"></a>minoritym &lt;-<span class="st"> </span>xmat <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>xmatt <span class="op">==</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb19-27"><a href="#cb19-27"></a></span>
<span id="cb19-28"><a href="#cb19-28"></a><span class="co"># for age max 5 year difference / for descriptives</span></span>
<span id="cb19-29"><a href="#cb19-29"></a>xmat &lt;-<span class="st"> </span><span class="kw">matrix</span>(lft, <span class="dt">nrow =</span> <span class="kw">length</span>(lft), <span class="dt">ncol =</span> <span class="kw">length</span>(lft))</span>
<span id="cb19-30"><a href="#cb19-30"></a>xmatt &lt;-<span class="st"> </span><span class="kw">t</span>(xmat)</span>
<span id="cb19-31"><a href="#cb19-31"></a>lftm &lt;-<span class="st"> </span>(<span class="kw">abs</span>(xmat <span class="op">-</span><span class="st"> </span>xmatt) <span class="op">&lt;</span><span class="st"> </span><span class="dv">6</span>)</span>
<span id="cb19-32"><a href="#cb19-32"></a></span>
<span id="cb19-33"><a href="#cb19-33"></a><span class="co"># calculate all possible similar dyads, not the focus of this exercise.  fndyads2(fnet[,,1], vrouwm)</span></span>
<span id="cb19-34"><a href="#cb19-34"></a><span class="co"># fndyads2(fnet[,,3], vrouwm) fndyads2(fnet[,,1], partijm) fndyads2(fnet[,,3], partijm)</span></span>
<span id="cb19-35"><a href="#cb19-35"></a><span class="co"># fndyads2(fnet[,,1], ethminzm) fndyads2(fnet[,,3], ethminzm)</span></span>
<span id="cb19-36"><a href="#cb19-36"></a></span>
<span id="cb19-37"><a href="#cb19-37"></a><span class="co"># make a big object to store all results</span></span>
<span id="cb19-38"><a href="#cb19-38"></a>desmat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">10</span>, <span class="dt">ncol =</span> <span class="dv">9</span>)</span>
<span id="cb19-39"><a href="#cb19-39"></a></span>
<span id="cb19-40"><a href="#cb19-40"></a><span class="co"># lets start using our functions</span></span>
<span id="cb19-41"><a href="#cb19-41"></a>desmat[<span class="dv">1</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(fnet[, , <span class="dv">1</span>])</span>
<span id="cb19-42"><a href="#cb19-42"></a>desmat[<span class="dv">1</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(fnet[, , <span class="dv">2</span>])</span>
<span id="cb19-43"><a href="#cb19-43"></a>desmat[<span class="dv">1</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(fnet[, , <span class="dv">3</span>])</span>
<span id="cb19-44"><a href="#cb19-44"></a>desmat[<span class="dv">2</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">1</span>], vrouwm)</span>
<span id="cb19-45"><a href="#cb19-45"></a>desmat[<span class="dv">2</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">2</span>], vrouwm)</span>
<span id="cb19-46"><a href="#cb19-46"></a>desmat[<span class="dv">2</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">3</span>], vrouwm)</span>
<span id="cb19-47"><a href="#cb19-47"></a>desmat[<span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">1</span>], vrouwm)</span>
<span id="cb19-48"><a href="#cb19-48"></a>desmat[<span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">2</span>], vrouwm)</span>
<span id="cb19-49"><a href="#cb19-49"></a>desmat[<span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">3</span>], vrouwm)</span>
<span id="cb19-50"><a href="#cb19-50"></a>desmat[<span class="dv">4</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">1</span>], partijm)</span>
<span id="cb19-51"><a href="#cb19-51"></a>desmat[<span class="dv">4</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">2</span>], partijm)</span>
<span id="cb19-52"><a href="#cb19-52"></a>desmat[<span class="dv">4</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">3</span>], partijm)</span>
<span id="cb19-53"><a href="#cb19-53"></a>desmat[<span class="dv">5</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">1</span>], partijm)</span>
<span id="cb19-54"><a href="#cb19-54"></a>desmat[<span class="dv">5</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">2</span>], partijm)</span>
<span id="cb19-55"><a href="#cb19-55"></a>desmat[<span class="dv">5</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">3</span>], partijm)</span>
<span id="cb19-56"><a href="#cb19-56"></a>desmat[<span class="dv">6</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">1</span>], ethminzm)</span>
<span id="cb19-57"><a href="#cb19-57"></a>desmat[<span class="dv">6</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">2</span>], ethminzm)</span>
<span id="cb19-58"><a href="#cb19-58"></a>desmat[<span class="dv">6</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">3</span>], ethminzm)</span>
<span id="cb19-59"><a href="#cb19-59"></a>desmat[<span class="dv">7</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">1</span>], ethminzm)</span>
<span id="cb19-60"><a href="#cb19-60"></a>desmat[<span class="dv">7</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">2</span>], ethminzm)</span>
<span id="cb19-61"><a href="#cb19-61"></a>desmat[<span class="dv">7</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">3</span>], ethminzm)</span>
<span id="cb19-62"><a href="#cb19-62"></a>desmat[<span class="dv">8</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">1</span>], minoritym)</span>
<span id="cb19-63"><a href="#cb19-63"></a>desmat[<span class="dv">8</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">2</span>], minoritym)</span>
<span id="cb19-64"><a href="#cb19-64"></a>desmat[<span class="dv">8</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">3</span>], minoritym)</span>
<span id="cb19-65"><a href="#cb19-65"></a>desmat[<span class="dv">9</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">1</span>], lftm)</span>
<span id="cb19-66"><a href="#cb19-66"></a>desmat[<span class="dv">9</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">2</span>], lftm)</span>
<span id="cb19-67"><a href="#cb19-67"></a>desmat[<span class="dv">9</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(fnet[, , <span class="dv">3</span>], lftm)</span>
<span id="cb19-68"><a href="#cb19-68"></a>desmat[<span class="dv">10</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">1</span>], lftm)</span>
<span id="cb19-69"><a href="#cb19-69"></a>desmat[<span class="dv">10</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">2</span>], lftm)</span>
<span id="cb19-70"><a href="#cb19-70"></a>desmat[<span class="dv">10</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(fnet[, , <span class="dv">3</span>], lftm)</span>
<span id="cb19-71"><a href="#cb19-71"></a></span>
<span id="cb19-72"><a href="#cb19-72"></a>desmat[<span class="dv">1</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(atmnet[, , <span class="dv">1</span>])</span>
<span id="cb19-73"><a href="#cb19-73"></a>desmat[<span class="dv">1</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(atmnet[, , <span class="dv">2</span>])</span>
<span id="cb19-74"><a href="#cb19-74"></a>desmat[<span class="dv">1</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(atmnet[, , <span class="dv">3</span>])</span>
<span id="cb19-75"><a href="#cb19-75"></a>desmat[<span class="dv">2</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">1</span>], vrouwm)</span>
<span id="cb19-76"><a href="#cb19-76"></a>desmat[<span class="dv">2</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">2</span>], vrouwm)</span>
<span id="cb19-77"><a href="#cb19-77"></a>desmat[<span class="dv">2</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">3</span>], vrouwm)</span>
<span id="cb19-78"><a href="#cb19-78"></a>desmat[<span class="dv">3</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">1</span>], vrouwm)</span>
<span id="cb19-79"><a href="#cb19-79"></a>desmat[<span class="dv">3</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">2</span>], vrouwm)</span>
<span id="cb19-80"><a href="#cb19-80"></a>desmat[<span class="dv">3</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">3</span>], vrouwm)</span>
<span id="cb19-81"><a href="#cb19-81"></a>desmat[<span class="dv">4</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">1</span>], partijm)</span>
<span id="cb19-82"><a href="#cb19-82"></a>desmat[<span class="dv">4</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">2</span>], partijm)</span>
<span id="cb19-83"><a href="#cb19-83"></a>desmat[<span class="dv">4</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">3</span>], partijm)</span>
<span id="cb19-84"><a href="#cb19-84"></a>desmat[<span class="dv">5</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">1</span>], partijm)</span>
<span id="cb19-85"><a href="#cb19-85"></a>desmat[<span class="dv">5</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">2</span>], partijm)</span>
<span id="cb19-86"><a href="#cb19-86"></a>desmat[<span class="dv">5</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">3</span>], partijm)</span>
<span id="cb19-87"><a href="#cb19-87"></a>desmat[<span class="dv">6</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">1</span>], ethminzm)</span>
<span id="cb19-88"><a href="#cb19-88"></a>desmat[<span class="dv">6</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">2</span>], ethminzm)</span>
<span id="cb19-89"><a href="#cb19-89"></a>desmat[<span class="dv">6</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">3</span>], ethminzm)</span>
<span id="cb19-90"><a href="#cb19-90"></a>desmat[<span class="dv">7</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">1</span>], ethminzm)</span>
<span id="cb19-91"><a href="#cb19-91"></a>desmat[<span class="dv">7</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">2</span>], ethminzm)</span>
<span id="cb19-92"><a href="#cb19-92"></a>desmat[<span class="dv">7</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">3</span>], ethminzm)</span>
<span id="cb19-93"><a href="#cb19-93"></a>desmat[<span class="dv">8</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">1</span>], minoritym)</span>
<span id="cb19-94"><a href="#cb19-94"></a>desmat[<span class="dv">8</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">2</span>], minoritym)</span>
<span id="cb19-95"><a href="#cb19-95"></a>desmat[<span class="dv">8</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">3</span>], minoritym)</span>
<span id="cb19-96"><a href="#cb19-96"></a>desmat[<span class="dv">9</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">1</span>], lftm)</span>
<span id="cb19-97"><a href="#cb19-97"></a>desmat[<span class="dv">9</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">2</span>], lftm)</span>
<span id="cb19-98"><a href="#cb19-98"></a>desmat[<span class="dv">9</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(atmnet[, , <span class="dv">3</span>], lftm)</span>
<span id="cb19-99"><a href="#cb19-99"></a>desmat[<span class="dv">10</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">1</span>], lftm)</span>
<span id="cb19-100"><a href="#cb19-100"></a>desmat[<span class="dv">10</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">2</span>], lftm)</span>
<span id="cb19-101"><a href="#cb19-101"></a>desmat[<span class="dv">10</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(atmnet[, , <span class="dv">3</span>], lftm)</span>
<span id="cb19-102"><a href="#cb19-102"></a></span>
<span id="cb19-103"><a href="#cb19-103"></a>desmat[<span class="dv">1</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(rtnet[, , <span class="dv">1</span>])</span>
<span id="cb19-104"><a href="#cb19-104"></a>desmat[<span class="dv">1</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(rtnet[, , <span class="dv">2</span>])</span>
<span id="cb19-105"><a href="#cb19-105"></a>desmat[<span class="dv">1</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensity</span>(rtnet[, , <span class="dv">3</span>])</span>
<span id="cb19-106"><a href="#cb19-106"></a>desmat[<span class="dv">2</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">1</span>], vrouwm)</span>
<span id="cb19-107"><a href="#cb19-107"></a>desmat[<span class="dv">2</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">2</span>], vrouwm)</span>
<span id="cb19-108"><a href="#cb19-108"></a>desmat[<span class="dv">2</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">3</span>], vrouwm)</span>
<span id="cb19-109"><a href="#cb19-109"></a>desmat[<span class="dv">3</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">1</span>], vrouwm)</span>
<span id="cb19-110"><a href="#cb19-110"></a>desmat[<span class="dv">3</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">2</span>], vrouwm)</span>
<span id="cb19-111"><a href="#cb19-111"></a>desmat[<span class="dv">3</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">3</span>], vrouwm)</span>
<span id="cb19-112"><a href="#cb19-112"></a>desmat[<span class="dv">4</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">1</span>], partijm)</span>
<span id="cb19-113"><a href="#cb19-113"></a>desmat[<span class="dv">4</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">2</span>], partijm)</span>
<span id="cb19-114"><a href="#cb19-114"></a>desmat[<span class="dv">4</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">3</span>], partijm)</span>
<span id="cb19-115"><a href="#cb19-115"></a>desmat[<span class="dv">5</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">1</span>], partijm)</span>
<span id="cb19-116"><a href="#cb19-116"></a>desmat[<span class="dv">5</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">2</span>], partijm)</span>
<span id="cb19-117"><a href="#cb19-117"></a>desmat[<span class="dv">5</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">3</span>], partijm)</span>
<span id="cb19-118"><a href="#cb19-118"></a>desmat[<span class="dv">6</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">1</span>], ethminzm)</span>
<span id="cb19-119"><a href="#cb19-119"></a>desmat[<span class="dv">6</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">2</span>], ethminzm)</span>
<span id="cb19-120"><a href="#cb19-120"></a>desmat[<span class="dv">6</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">3</span>], ethminzm)</span>
<span id="cb19-121"><a href="#cb19-121"></a>desmat[<span class="dv">7</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">1</span>], ethminzm)</span>
<span id="cb19-122"><a href="#cb19-122"></a>desmat[<span class="dv">7</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">2</span>], ethminzm)</span>
<span id="cb19-123"><a href="#cb19-123"></a>desmat[<span class="dv">7</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">3</span>], ethminzm)</span>
<span id="cb19-124"><a href="#cb19-124"></a>desmat[<span class="dv">8</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">1</span>], minoritym)</span>
<span id="cb19-125"><a href="#cb19-125"></a>desmat[<span class="dv">8</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">2</span>], minoritym)</span>
<span id="cb19-126"><a href="#cb19-126"></a>desmat[<span class="dv">8</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">3</span>], minoritym)</span>
<span id="cb19-127"><a href="#cb19-127"></a>desmat[<span class="dv">9</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">1</span>], lftm)</span>
<span id="cb19-128"><a href="#cb19-128"></a>desmat[<span class="dv">9</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">2</span>], lftm)</span>
<span id="cb19-129"><a href="#cb19-129"></a>desmat[<span class="dv">9</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityintra</span>(rtnet[, , <span class="dv">3</span>], lftm)</span>
<span id="cb19-130"><a href="#cb19-130"></a>desmat[<span class="dv">10</span>, <span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">1</span>], lftm)</span>
<span id="cb19-131"><a href="#cb19-131"></a>desmat[<span class="dv">10</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">2</span>], lftm)</span>
<span id="cb19-132"><a href="#cb19-132"></a>desmat[<span class="dv">10</span>, <span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fdensityinter</span>(rtnet[, , <span class="dv">3</span>], lftm)</span>
<span id="cb19-133"><a href="#cb19-133"></a></span>
<span id="cb19-134"><a href="#cb19-134"></a><span class="kw">colnames</span>(desmat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;friends w1&quot;</span>, <span class="st">&quot;friends w2&quot;</span>, <span class="st">&quot;friends w3&quot;</span>, <span class="st">&quot;atmentions w1&quot;</span>, <span class="st">&quot;atmentions w2&quot;</span>, <span class="st">&quot;atmentions w3&quot;</span>, </span>
<span id="cb19-135"><a href="#cb19-135"></a>    <span class="st">&quot;retweets w1&quot;</span>, <span class="st">&quot;retweets w2&quot;</span>, <span class="st">&quot;retweets w3&quot;</span>)</span>
<span id="cb19-136"><a href="#cb19-136"></a><span class="kw">rownames</span>(desmat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;total&quot;</span>, <span class="st">&quot;same sex&quot;</span>, <span class="st">&quot;different sex&quot;</span>, <span class="st">&quot;same party&quot;</span>, <span class="st">&quot;different party&quot;</span>, <span class="st">&quot;same ethnicity&quot;</span>, </span>
<span id="cb19-137"><a href="#cb19-137"></a>    <span class="st">&quot;different ethnicity&quot;</span>, <span class="st">&quot;both minority&quot;</span>, <span class="st">&quot;same age (&lt;6)&quot;</span>, <span class="st">&quot;different age (&gt;5)&quot;</span>)</span>
<span id="cb19-138"><a href="#cb19-138"></a>desmat</span></code></pre></div>
<pre><code>##                     friends w1 friends w2 friends w3 atmentions w1 atmentions w2 atmentions w3
## total                0.2545583  0.2794521  0.2797969    0.04912612    0.03500236   0.013465660
## same sex             0.2630408  0.2887662  0.2883167    0.05278618    0.03569521   0.013750219
## different sex        0.2449678  0.2689211  0.2701115    0.04498792    0.03421900   0.013142174
## same party           0.7091278  0.7334686  0.7415459    0.19918864    0.14239351   0.063607085
## different party      0.1946538  0.2196204  0.2193593    0.02935044    0.02085004   0.006902729
## same ethnicity       0.2655497  0.2885362  0.2885929    0.04926514    0.03574368   0.013491604
## different ethnicity  0.2096154  0.2423077  0.2435592    0.04855769    0.03197115   0.013358779
## both minority        0.2537506  0.2786431  0.2790029    0.04859054    0.03497372   0.013570823
## same age (&lt;6)        0.2933009  0.3137704  0.3131586    0.05868881    0.03693100   0.014668186
## different age (&gt;5)   0.2354766  0.2625494  0.2635734    0.04441624    0.03405245   0.012880886
##                     retweets w1 retweets w2 retweets w3
## total               0.046008503  0.03401361  0.03373404
## same sex            0.045753961  0.03363111  0.03284288
## different sex       0.046296296  0.03444843  0.03474711
## same party          0.335496957  0.25040258  0.24798712
## different party     0.007858861  0.00569080  0.00569080
## same ethnicity      0.047971781  0.03491604  0.03381587
## different ethnicity 0.037980769  0.03029580  0.03339695
## both minority       0.045723841  0.03402130  0.03355009
## same age (&lt;6)       0.052247352  0.03716890  0.03702649
## different age (&gt;5)  0.042935702  0.03247922  0.03213296</code></pre>
<p>In general we observe quite some homophily in our dyads. Most importantly, we observe that the density is higher within political parties than between political parties. Homophily across social dimensions is, at first sight, not very pronounced.</p>
</div>
</div>
<div id="coleman-homophily-index." class="section level2">
<h2><span class="header-section-number">5.5</span> Coleman Homophily index.</h2>
<p>Because the sizes of the different subgroups vary (e.g. the political parties have different seats) and the number of out-degrees differs between MPs, within party densities may also be higher when MPs randomly select a partner/alter. That is, segregation will be in part structurally induced by differences in relative group sizes and activity on twitter (i.e. outdegrees). A measure of segregation that takes relative group sizes and differences in outdegrees into account is the Coleman’s Homophily Index. In this measure a value of 0 would indicate that the observed number of within-group ties is the same as would be expected under random choice. A value of 1 would indicate maximum segregation and a value of -1 indicates the unlikely case that MPs maximally avoid within group relations.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>colmat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="ot">NA</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">9</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a>colmat[<span class="dv">1</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">1</span>], partij)</span>
<span id="cb21-4"><a href="#cb21-4"></a>colmat[<span class="dv">1</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">2</span>], partij)</span>
<span id="cb21-5"><a href="#cb21-5"></a>colmat[<span class="dv">1</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">3</span>], partij)</span>
<span id="cb21-6"><a href="#cb21-6"></a>colmat[<span class="dv">1</span>, <span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">1</span>], partij)</span>
<span id="cb21-7"><a href="#cb21-7"></a>colmat[<span class="dv">1</span>, <span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">2</span>], partij)</span>
<span id="cb21-8"><a href="#cb21-8"></a>colmat[<span class="dv">1</span>, <span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">3</span>], partij)</span>
<span id="cb21-9"><a href="#cb21-9"></a>colmat[<span class="dv">1</span>, <span class="dv">7</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">1</span>], partij)</span>
<span id="cb21-10"><a href="#cb21-10"></a>colmat[<span class="dv">1</span>, <span class="dv">8</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">2</span>], partij)</span>
<span id="cb21-11"><a href="#cb21-11"></a>colmat[<span class="dv">1</span>, <span class="dv">9</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">3</span>], partij)</span>
<span id="cb21-12"><a href="#cb21-12"></a></span>
<span id="cb21-13"><a href="#cb21-13"></a>colmat[<span class="dv">2</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">1</span>], vrouw)</span>
<span id="cb21-14"><a href="#cb21-14"></a>colmat[<span class="dv">2</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">2</span>], vrouw)</span>
<span id="cb21-15"><a href="#cb21-15"></a>colmat[<span class="dv">2</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">3</span>], vrouw)</span>
<span id="cb21-16"><a href="#cb21-16"></a>colmat[<span class="dv">2</span>, <span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">1</span>], vrouw)</span>
<span id="cb21-17"><a href="#cb21-17"></a>colmat[<span class="dv">2</span>, <span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">2</span>], vrouw)</span>
<span id="cb21-18"><a href="#cb21-18"></a>colmat[<span class="dv">2</span>, <span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">3</span>], vrouw)</span>
<span id="cb21-19"><a href="#cb21-19"></a>colmat[<span class="dv">2</span>, <span class="dv">7</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">1</span>], vrouw)</span>
<span id="cb21-20"><a href="#cb21-20"></a>colmat[<span class="dv">2</span>, <span class="dv">8</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">2</span>], vrouw)</span>
<span id="cb21-21"><a href="#cb21-21"></a>colmat[<span class="dv">2</span>, <span class="dv">9</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">3</span>], vrouw)</span>
<span id="cb21-22"><a href="#cb21-22"></a></span>
<span id="cb21-23"><a href="#cb21-23"></a>colmat[<span class="dv">3</span>, <span class="dv">1</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">1</span>], ethminz)</span>
<span id="cb21-24"><a href="#cb21-24"></a>colmat[<span class="dv">3</span>, <span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">2</span>], ethminz)</span>
<span id="cb21-25"><a href="#cb21-25"></a>colmat[<span class="dv">3</span>, <span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(fnet[, , <span class="dv">3</span>], ethminz)</span>
<span id="cb21-26"><a href="#cb21-26"></a>colmat[<span class="dv">3</span>, <span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">1</span>], ethminz)</span>
<span id="cb21-27"><a href="#cb21-27"></a>colmat[<span class="dv">3</span>, <span class="dv">5</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">2</span>], ethminz)</span>
<span id="cb21-28"><a href="#cb21-28"></a>colmat[<span class="dv">3</span>, <span class="dv">6</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(atmnet[, , <span class="dv">3</span>], ethminz)</span>
<span id="cb21-29"><a href="#cb21-29"></a>colmat[<span class="dv">3</span>, <span class="dv">7</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">1</span>], ethminz)</span>
<span id="cb21-30"><a href="#cb21-30"></a>colmat[<span class="dv">3</span>, <span class="dv">8</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">2</span>], ethminz)</span>
<span id="cb21-31"><a href="#cb21-31"></a>colmat[<span class="dv">3</span>, <span class="dv">9</span>] &lt;-<span class="st"> </span><span class="kw">fscolnet</span>(rtnet[, , <span class="dv">3</span>], ethminz)</span>
<span id="cb21-32"><a href="#cb21-32"></a></span>
<span id="cb21-33"><a href="#cb21-33"></a><span class="kw">colnames</span>(colmat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;friends w1&quot;</span>, <span class="st">&quot;friends w2&quot;</span>, <span class="st">&quot;friends w3&quot;</span>, <span class="st">&quot;atmentions w1&quot;</span>, <span class="st">&quot;atmentions w2&quot;</span>, <span class="st">&quot;atmentions w3&quot;</span>, </span>
<span id="cb21-34"><a href="#cb21-34"></a>    <span class="st">&quot;retweets w1&quot;</span>, <span class="st">&quot;retweets w2&quot;</span>, <span class="st">&quot;retweets w3&quot;</span>)</span>
<span id="cb21-35"><a href="#cb21-35"></a><span class="kw">rownames</span>(colmat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;party&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;ethnicity&quot;</span>)</span>
<span id="cb21-36"><a href="#cb21-36"></a>colmat</span></code></pre></div>
<pre><code>##           friends w1 friends w2 friends w3 atmentions w1 atmentions w2 atmentions w3  retweets w1
## party     0.23290292 0.21197422 0.21310665    0.39147672   0.399713437    0.48111606  0.804211725
## sex       0.04624336 0.04080333 0.04272129    0.07421140   0.032149289    0.04699739 -0.005381047
## ethnicity 0.12122258 0.09821319 0.09889074   -0.03010028  -0.004564059   -0.02078296  0.051678853
##            retweets w2  retweets w3
## party      0.803175327  0.802304023
## sex       -0.029967472 -0.011929039
## ethnicity -0.007183535 -0.006536557</code></pre>
<p>Well? YES, we observe segregation. Especially within the retweet-network and especially along the party-dimension.</p>
</div>
<div id="rsiena-models" class="section level2">
<h2><span class="header-section-number">5.6</span> RSiena models</h2>
<div id="step-1-data" class="section level3">
<h3><span class="header-section-number">5.6.1</span> step 1: Data</h3>
<p>Done! Our RSiena object is <code>mydata</code>.
We are focussing on the retweetnetwork and do not yet take into account multiplexity.</p>
</div>
<div id="step-2-define-myeff-object." class="section level3">
<h3><span class="header-section-number">5.6.2</span> step 2: define myeff object.</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">library</span>(RSiena)</span>
<span id="cb23-2"><a href="#cb23-2"></a>myeff &lt;-<span class="st"> </span><span class="kw">getEffects</span>(mydata)</span>
<span id="cb23-3"><a href="#cb23-3"></a>myeff</span></code></pre></div>
<pre><code>##    name   effectName                      include fix   test  initialValue parm
## 1  fnet   constant fnet rate (period 1)   TRUE    FALSE FALSE    7.22021   0   
## 2  fnet   constant fnet rate (period 2)   TRUE    FALSE FALSE    3.79571   0   
## 3  fnet   fnet: outdegree (density)       TRUE    FALSE FALSE    0.00000   0   
## 4  fnet   fnet: reciprocity               TRUE    FALSE FALSE    0.00000   0   
## 5  atmnet constant atmnet rate (period 1) TRUE    FALSE FALSE   16.26089   0   
## 6  atmnet constant atmnet rate (period 2) TRUE    FALSE FALSE    9.17902   0   
## 7  atmnet atmnet: outdegree (density)     TRUE    FALSE FALSE   -1.76137   0   
## 8  atmnet atmnet: reciprocity             TRUE    FALSE FALSE    0.00000   0   
## 9  rtnet  constant rtnet rate (period 1)  TRUE    FALSE FALSE   10.98716   0   
## 10 rtnet  constant rtnet rate (period 2)  TRUE    FALSE FALSE    9.39819   0   
## 11 rtnet  rtnet: outdegree (density)      TRUE    FALSE FALSE   -1.61392   0   
## 12 rtnet  rtnet: reciprocity              TRUE    FALSE FALSE    0.00000   0</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>myeff_m1 &lt;-<span class="st"> </span>myeff</span>
<span id="cb25-2"><a href="#cb25-2"></a>myeff_m1 &lt;-<span class="st"> </span><span class="kw">includeEffects</span>(myeff_m1, sameX, <span class="dt">interaction1 =</span> <span class="st">&quot;partij&quot;</span>, <span class="dt">name =</span> <span class="st">&quot;rtnet&quot;</span>)</span></code></pre></div>
<pre><code>##   effectName         include fix   test  initialValue parm
## 1 rtnet: same partij TRUE    FALSE FALSE          0   0</code></pre>
</div>
<div id="step-3-create-alogrithm" class="section level3">
<h3><span class="header-section-number">5.6.3</span> step 3: create alogrithm</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="co"># I used a seed so you will probably see the same results</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>myalgorithm &lt;-<span class="st"> </span><span class="kw">sienaAlgorithmCreate</span>(<span class="dt">projname =</span> <span class="st">&quot;test&quot;</span>, <span class="dt">seed =</span> <span class="dv">345654</span>)</span></code></pre></div>
<pre><code>## siena07 will create an output file test.txt .</code></pre>
<p>Have a look at the created file!!</p>
</div>
<div id="step-4-estimate-model" class="section level3">
<h3><span class="header-section-number">5.6.4</span> step 4: estimate model</h3>
<p>I generally estimate the model three times to start with. Gives me the opportunity to grab a cup of coffee. Depending on the results I will decide whether or not I need to rerun the model and with which results I want to continue later.</p>
<p>I :heart: <i class="fas fa-mug-hot"></i>!! :smile:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># to speed things up a bit, I am using more cores.</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>ansM1 &lt;-<span class="st"> </span><span class="kw">siena07</span>(myalgorithm, <span class="dt">data =</span> mydata, <span class="dt">effects =</span> myeff_m1, <span class="dt">useCluster =</span> <span class="ot">TRUE</span>, <span class="dt">nbrNodes =</span> <span class="dv">4</span>, <span class="dt">initC =</span> <span class="ot">TRUE</span>, </span>
<span id="cb29-3"><a href="#cb29-3"></a>    <span class="dt">batch =</span> <span class="ot">TRUE</span>)</span>
<span id="cb29-4"><a href="#cb29-4"></a>ansM1b &lt;-<span class="st"> </span><span class="kw">siena07</span>(myalgorithm, <span class="dt">data =</span> mydata, <span class="dt">prevAns =</span> ansM1, <span class="dt">effects =</span> myeff_m1, <span class="dt">useCluster =</span> <span class="ot">TRUE</span>, </span>
<span id="cb29-5"><a href="#cb29-5"></a>    <span class="dt">nbrNodes =</span> <span class="dv">4</span>, <span class="dt">initC =</span> <span class="ot">TRUE</span>, <span class="dt">batch =</span> <span class="ot">TRUE</span>)</span>
<span id="cb29-6"><a href="#cb29-6"></a>ansM1c &lt;-<span class="st"> </span><span class="kw">siena07</span>(myalgorithm, <span class="dt">data =</span> mydata, <span class="dt">prevAns =</span> ansM1b, <span class="dt">effects =</span> myeff_m1, <span class="dt">useCluster =</span> <span class="ot">TRUE</span>, </span>
<span id="cb29-7"><a href="#cb29-7"></a>    <span class="dt">nbrNodes =</span> <span class="dv">4</span>, <span class="dt">initC =</span> <span class="ot">TRUE</span>, <span class="dt">batch =</span> <span class="ot">TRUE</span>)</span>
<span id="cb29-8"><a href="#cb29-8"></a></span>
<span id="cb29-9"><a href="#cb29-9"></a><span class="kw">save</span>(ansM1, <span class="dt">file =</span> <span class="st">&quot;ansM1a.RData&quot;</span>)</span>
<span id="cb29-10"><a href="#cb29-10"></a><span class="kw">save</span>(ansM1b, <span class="dt">file =</span> <span class="st">&quot;ansM1b.RData&quot;</span>)</span>
<span id="cb29-11"><a href="#cb29-11"></a><span class="kw">save</span>(ansM1c, <span class="dt">file =</span> <span class="st">&quot;ansM1c.RData&quot;</span>)</span></code></pre></div>
<p>Let us have a look at the data.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="kw">load</span>(<span class="st">&quot;static/ansM1a.RData&quot;</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="kw">load</span>(<span class="st">&quot;static/ansM1b.RData&quot;</span>)</span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="kw">load</span>(<span class="st">&quot;static/ansM1c.RData&quot;</span>)</span>
<span id="cb30-4"><a href="#cb30-4"></a>ansM1</span></code></pre></div>
<pre><code>## Estimates, standard errors and convergence t-ratios
## 
##                                            Estimate   Standard   Convergence 
##                                                         Error      t-ratio   
##    1. rate constant fnet rate (period 1)    3.7091  ( 0.1678   )    0.0802   
##    2. rate constant fnet rate (period 2)    1.9690  ( 0.1206   )   -0.0329   
##    3. eval fnet: outdegree (density)       -0.6588  ( 0.0876   )    0.0250   
##    4. eval fnet: reciprocity                0.8762  ( 0.0907   )   -0.0133   
##    5. rate constant atmnet rate (period 1) 25.7496  ( 1.8713   )    0.0220   
##    6. rate constant atmnet rate (period 2)  9.6467  ( 0.6387   )    0.0098   
##    7. eval atmnet: outdegree (density)     -2.3452  ( 0.0321   )   -0.0936   
##    8. eval atmnet: reciprocity              1.7004  ( 0.0727   )   -0.0577   
##    9. rate constant rtnet rate (period 1)  13.4141  ( 0.8603   )    0.0133   
##   10. rate constant rtnet rate (period 2)  12.1080  ( 0.9050   )    0.0024   
##   11. eval rtnet: outdegree (density)      -2.8349  ( 0.0465   )   -0.0047   
##   12. eval rtnet: reciprocity               0.8781  ( 0.0643   )    0.0307   
##   13. eval rtnet: same partij               1.8582  ( 0.0583   )    0.0427   
## 
## Overall maximum convergence ratio:    0.1963 
## 
## 
## Total of 2158 iteration steps.</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>ansM1b</span></code></pre></div>
<pre><code>## Estimates, standard errors and convergence t-ratios
## 
##                                            Estimate   Standard   Convergence 
##                                                         Error      t-ratio   
##    1. rate constant fnet rate (period 1)    3.7037  ( 0.1701   )    0.0505   
##    2. rate constant fnet rate (period 2)    1.9687  ( 0.1205   )   -0.0350   
##    3. eval fnet: outdegree (density)       -0.6541  ( 0.0844   )   -0.0026   
##    4. eval fnet: reciprocity                0.8756  ( 0.0841   )    0.0061   
##    5. rate constant atmnet rate (period 1) 25.7211  ( 1.8487   )    0.0565   
##    6. rate constant atmnet rate (period 2)  9.6449  ( 0.5197   )   -0.0190   
##    7. eval atmnet: outdegree (density)     -2.3452  ( 0.0297   )   -0.0472   
##    8. eval atmnet: reciprocity              1.7000  ( 0.0703   )   -0.0012   
##    9. rate constant rtnet rate (period 1)  13.3847  ( 0.8180   )    0.0404   
##   10. rate constant rtnet rate (period 2)  12.0998  ( 0.7632   )    0.0072   
##   11. eval rtnet: outdegree (density)      -2.8343  ( 0.0503   )   -0.0190   
##   12. eval rtnet: reciprocity               0.8758  ( 0.0614   )   -0.0285   
##   13. eval rtnet: same partij               1.8582  ( 0.0601   )    0.0178   
## 
## Overall maximum convergence ratio:    0.1857 
## 
## 
## Total of 2104 iteration steps.</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode numberSource r highlightt numberLines"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>ansM1c</span></code></pre></div>
<pre><code>## Estimates, standard errors and convergence t-ratios
## 
##                                            Estimate   Standard   Convergence 
##                                                         Error      t-ratio   
##    1. rate constant fnet rate (period 1)    3.7053  ( 0.1674   )   -0.0270   
##    2. rate constant fnet rate (period 2)    1.9683  ( 0.1254   )    0.0579   
##    3. eval fnet: outdegree (density)       -0.6570  ( 0.0852   )   -0.0352   
##    4. eval fnet: reciprocity                0.8753  ( 0.0933   )   -0.0508   
##    5. rate constant atmnet rate (period 1) 25.7437  ( 1.4522   )   -0.0013   
##    6. rate constant atmnet rate (period 2)  9.6502  ( 0.5618   )    0.0395   
##    7. eval atmnet: outdegree (density)     -2.3453  ( 0.0304   )   -0.0235   
##    8. eval atmnet: reciprocity              1.7011  ( 0.0645   )    0.0050   
##    9. rate constant rtnet rate (period 1)  13.3964  ( 0.8279   )    0.0523   
##   10. rate constant rtnet rate (period 2)  12.0945  ( 0.8603   )   -0.0005   
##   11. eval rtnet: outdegree (density)      -2.8322  ( 0.0500   )   -0.0197   
##   12. eval rtnet: reciprocity               0.8779  ( 0.0625   )    0.0133   
##   13. eval rtnet: same partij               1.8551  ( 0.0569   )    0.0097   
## 
## Overall maximum convergence ratio:    0.1471 
## 
## 
## Total of 2078 iteration steps.</code></pre>
<p>So, do we have an answer to our first research question? It is up to you answer the other research questions.</p>
<p>Latest Version: 30-09-2020</p>
<p>Please email any comments to: <a href="mailto:j.tolsma@ru.nl" class="email">j.tolsma@ru.nl</a></p>
</div>
</div>
</div>
